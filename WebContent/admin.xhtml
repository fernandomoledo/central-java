<ui:composition  template="template.xhtml"
		xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://java.sun.com/jsp/jstl/core"> 
<ui:define name="conteudo">
 <!-- Conteúdo da página -->
    <div class="container-fluid">
      <!-- Título -->
      <div class="row">
        <div class="col-md-12 text-center">
          <h1>Administração</h1>
        </div>
      </div>
      <div class="push3"></div>
      <div class="row">
        <div class="col-md-12 text-center">
          <div class="col-md-3"></div>
          <div class="col-md-6">
         <h:form id="fcad">
         <p:messages autoUpdate="true" closable="true" id="mensagens"  />
         <h4>Definir amarração de lotações</h4>
            <div class="row">
		          <div class="input-group">
	              <span class="input-group-addon" id="sizing-addon2">Lotação principal</span>
	              		<h:selectOneMenu value="#{adminMB.lotacao.nome}" class="form-control" aria-describedby="sizing-addon2" required="true" requiredMessage=" - A lotação principal é obrigatória">
	              			<f:selectItem itemLabel="-- Escolha a lotação --" itemValue="" />
		                 	<f:selectItems value="#{adminMB.lotacoes}" var="lot" itemLabel="#{lot.nome}" itemValue="#{lot.nome}" />
		                 </h:selectOneMenu>
	            </div>
            </div>  
             <div class="push2"></div>
            <div class="row">
		          <div class="input-group">
	              <span class="input-group-addon" id="sizing-addon2">Lotação secundária</span>
	              		<h:selectOneMenu value="#{adminMB.secundaria.nome}" class="form-control" aria-describedby="sizing-addon2" required="true" requiredMessage=" - A lotação secundária é obrigatória">
	              			<f:selectItem itemLabel="-- Escolha a lotação --" itemValue="" />
		                 	<f:selectItems value="#{adminMB.lotacoes}" var="lot" itemLabel="#{lot.nome}" itemValue="#{lot.nome}" />
		                 </h:selectOneMenu>
	            </div>
            </div>  
            <div class="push2"></div> 
            <div class="text-right">
                <h:commandButton class="btn btn-primary" value="Salvar" actionListener="#{adminMB.salvar()}" update="@form" />
            </div>
           </h:form>
 
            
            
        
            <div class="push3"></div>     
             <h:form>       
            <h:dataTable class="table table-striped example2" id="example2" var="lotacao" value="#{adminMB.lotacoesAmarradas}">
              	<h:column>
			       	<f:facet name="header">Lotação Principal</f:facet>
			       	#{lotacao.pai.nome}
		       </h:column>
		       <h:column>
			       	<f:facet name="header">Lotação Secundária</f:facet>
			       	#{lotacao.filha.nome}
		       </h:column>
		       <h:column>
		       <p:commandButton icon="ui-icon-trash" actionListener="#{adminMB.excluir(lotacao.id)}" 
		       title="Excluir a amrração entre #{lotacao.pai.nome} e #{lotacao.filha.nome}" 
			       	update="@all" onclick="return confirm('Deseja realmente excluir a amrração entre #{lotacao.pai.nome} e #{lotacao.filha.nome}?');"/>
		       </h:column>
            </h:dataTable>    
             </h:form>	                
          </div>
      	
          <div class="col-md-3"></div>
        </div>
      </div>           
    </div>
    
    <!-- Fim Conteúdo da página -->
    </ui:define>
</ui:composition>